# app.py
import streamlit as st
import random

st.set_page_config(page_title="MBTI 취향 추천 🎯", page_icon="🧭", layout="centered")

# 제목
st.title("MBTI 기반 취향 추천 🎬📚")
st.subheader("MBTI 하나 골라줘~ 그럼 너한테 딱 맞는 책 2권, 영화 2편 추천해줄게! ✨")
st.write("친근한 톤으로 설명해줄게 — 골라봐! 👇")

# MBTI 리스트
mbti_list = [
    "ISTJ","ISFJ","INFJ","INTJ",
    "ISTP","ISFP","INFP","INTP",
    "ESTP","ESFP","ENFP","ENTP",
    "ESTJ","ESFJ","ENFJ","ENTJ"
]

# 추천 데이터 (각 MBTI -> {books: [(title, blurb), ...], movies: [(title, blurb), ...]})
recommendations = {
    "ISTJ": {
        "books": [
            ("Atomic Habits — 제임스 클리어", "꾸준함으로 실생활 개선하는 팁. 현실적이고 실용적이야. 📈"),
            ("아무튼, 글 — 김지수", "사소한 관찰을 좋아하는 ISTJ에게 편안한 에세이 모음집. ✍️")
        ],
        "movies": [
            ("셜록 홈즈 (추리 영화)", "논리적 추리와 치밀한 플랜을 즐긴다면 딱! 🕵️‍♂️"),
            ("머니볼", "데이터와 현실적인 전략으로 결과를 만드는 이야기. ⚾️")
        ]
    },
    "ISFJ": {
        "books": [
            ("센스 있는 사람은 괜히 친절하지 않다 — 에세이", "따뜻하고 현실적인 위로가 필요한 날에 좋아. 🌿"),
            ("스모일링 어게인(소설)", "사소한 일상의 따뜻함을 느끼게 해주는 이야기. ☕️")
        ],
        "movies": [
            ("리틀 포레스트", "잔잔한 자연과 밥 짓는 장면이 힐링돼. 🥘"),
            ("어거스트 러시", "감성적인 음악과 가족 이야기로 마음 따뜻해짐. 🎶")
        ]
    },
    "INFJ": {
        "books": [
            ("호밀밭의 파수꾼", "내면의 성장과 고민을 섬세하게 보여주는 고전. 🌾"),
            ("나미야 잡화점의 기적", "사연과 공감이 많은 따뜻한 판타지적 소설. ✨")
        ],
        "movies": [
            ("이터널 선샤인", "마음의 복잡함과 관계에 대해 깊게 생각하게 됨. 💭"),
            ("어바웃 타임", "인생과 선택에 관한 잔잔한 감동. ⏳")
        ]
    },
    "INTJ": {
        "books": [
            ("사피엔스", "넓은 관점으로 역사를 읽는 걸 좋아하는 사람에게 추천. 🌍"),
            ("1984", "사회 구조와 시스템에 대해 생각하게 하는 디스토피아. 🏛")
        ],
        "movies": [
            ("인셉션", "복잡한 구조와 치밀한 설정을 즐기는 편이면 굿. 🌀"),
            ("마션", "논리와 문제 해결을 좋아하는 사람에게 강추. 🚀")
        ]
    },
    "ISTP": {
        "books": [
            ("오토바이 도둑의 일기(실용/모험 에세이)", "액션과 현실 감각 있는 이야기를 좋아하면 OK. 🏍"),
            ("총, 균, 쇠", "기술과 환경이 인간 사회를 어떻게 바꿨는지 흥미롭다면 추천. 🔧")
        ],
        "movies": [
            ("존 윅", "직관적이고 액션 중심, 스트레스 풀기 좋음. 🔫"),
            ("스피드", "빠른 전개와 긴장감 좋아하면 딱! 🚍")
        ]
    },
    "ISFP": {
        "books": [
            ("나미야 잡화점의 기적", "감성적이고 따뜻한 이야기로 마음 힐링. 🌙"),
            ("작은 아씨들", "감성 깊은 성장 이야기 좋아한다면 추천. 🌸")
        ],
        "movies": [
            ("콜 미 바이 유어 네임", "감성적이고 섬세한 분위기를 즐기는 사람에게. 🌅"),
            ("아멜리에", "작고 아름다운 일상에 반하는 감성 영화. 🎨")
        ]
    },
    "INFP": {
        "books": [
            ("데미안", "내면의 탐구와 자아성찰을 좋아하는 사람에게. 🌱"),
            ("빨간 머리 앤", "상상력 풍부하고 따뜻한 메시지의 고전. 🍂")
        ],
        "movies": [
            ("500일의 썸머", "감정의 미묘함과 관계의 현실을 섬세하게 다룸. 💔💫"),
            ("그랜드 부다페스트 호텔", "예술적이고 몽환적인 감각을 즐긴다면 추천. 🏨")
        ]
    },
    "INTP": {
        "books": [
            ("생각의 탄생", "아이디어와 창의적 사고 과정에 관심 많다면 좋음. 💡"),
            ("코스모스", "우주와 과학적 호기심을 자극하는 명저. 🌌")
        ],
        "movies": [
            ("매트릭스", "철학적이고 개념적인 설정 좋아하면 푹 빠질걸? 🕶"),
            ("소스 코드", "퍼즐 풀 듯한 전개가 매력적. 🔁")
        ]
    },
    "ESTP": {
        "books": [
            ("아웃라이더(실화 기반 액션/모험)", "액션과 실전감 있는 이야기 좋아하면 굿. 🏁"),
            ("제로 투 원", "실용적인 창업/실행 아이디어를 좋아하는 편에 추천. 🚀")
        ],
        "movies": [
            ("분노의 질주", "속도감 넘치고 에너지 팡팡! 🚗💨"),
            ("페이트 오브 더 퓨리어스", "스릴과 액션 연속으로 즐기기 좋아. 💥")
        ]
    },
    "ESFP": {
        "books": [
            ("우아한 거짓말", "감성적이고 드라마틱한 이야기 선호하면 굿. 🎭"),
            ("Eat Pray Love", "삶을 즐기고 경험을 좋아하는 사람에게 추천. ✈️")
        ],
        "movies": [
            ("라라랜드", "음악과 화려한 감성이 눈에 띄는 작품. 🎶"),
            ("퀸카로 살아남는 법", "재미있고 사교적인 분위기 좋아하면 딱! 💃")
        ]
    },
    "ENFP": {
        "books": [
            ("바람과 함께 사라지다", "드라마틱하고 감정 선이 풍부한 이야기 좋아하면 추천. 🌪"),
            ("모든 것이 되는 법(자기계발+상상)", "아이디어와 영감을 주는 책. ✨")
        ],
        "movies": [
            ("이터널 선샤인", "감정의 롤러코스터와 상상력이 잘 어우러짐. 💡"),
            ("빅 피시", "환상적이고 감성적인 스토리텔링 추천. 🐟")
        ]
    },
    "ENTP": {
        "books": [
            ("넛지", "아이디어 실험과 설득 전략에 관심 있다면 흥미로움. 🧠"),
            ("생각의 속도", "창의적 사고와 토론 좋아하는 사람에게 추천. ⚡️")
        ],
        "movies": [
            ("소셜 네트워크", "아이디어, 토론, 논쟁을 즐기는 사람에게 딱. 💻"),
            ("프레스티지", "트릭과 반전 좋아하면 손에 땀! 🎩")
        ]
    },
    "ESTJ": {
        "books": [
            ("리더의 조건", "실용적이고 조직적인 팁을 좋아하면 도움 됨. 🧾"),
            ("돈의 심리학", "실무적이고 현실적인 관점에서 경제를 보고 싶다면 추천. 💼")
        ],
        "movies": [
            ("폴라 익스프레스", "목표를 향해 꾸준히 나아가는 이야기로 자극받음. 🚂"),
            ("에어포스 원", "리더십과 결단력을 보여주는 스릴러. 🛩")
        ]
    },
    "ESFJ": {
        "books": [
            ("사랑의 기술", "관계 중심적이고 따뜻한 조언이 필요한 분께. ❤️"),
            ("작은 습관의 힘", "일상에서의 소소한 변화에 공감할 듯. 🌱")
        ],
        "movies": [
            ("프렌즈: 더 무비(유사한 분위기 영화)", "사람과의 연결, 유대감 좋아하면 굿. 👫"),
            ("리틀 우먼", "가족과 우정을 소중히 여기는 이야기. 🧵")
        ]
    },
    "ENFJ": {
        "books": [
            ("리더십 수업", "사람을 이끄는 이야기와 통찰 좋아한다면 추천. 🗣"),
            ("나는 왜 너를 사랑하는가", "관계와 공감에 관한 통찰을 제공. 💞")
        ],
        "movies": [
            ("인턴", "사람과 조직, 따뜻한 리더십에 관한 이야기. 👔"),
            ("굿 윌 헌팅", "멘토링과 성장, 감동의 드라마. 🧠")
        ]
    },
    "ENTJ": {
        "books": [
            ("하버드 CEO의 결정 수업", "전략과 의사결정에 관심 많은 분에게 추천. 📊"),
            ("제로 투 원", "창업/비전과 실행력에 영감 주는 책. 🔥")
        ],
        "movies": [
            ("월 스트리트", "권력과 전략, 야망을 다루는 드라마. 💼"),
            ("에린 브로코비치", "목표 달성과 리더십이 돋보이는 실화. 🏛")
        ]
    }
}

# UI: 선택 박스
chosen = st.selectbox("너의 MBTI는 뭐야? 😎", ["선택하세요"] + mbti_list)

# 버튼
if st.button("추천 받기! 🎁"):
    if chosen == "선택하세요":
        st.warning("MBTI를 골라줘야 해~ 하나만 골라봐! 😊")
    else:
        # 가져오기
        rec = recommendations.get(chosen)
        # 헤더
        st.markdown(f"### {chosen} — 너를 위한 추천 리스트 💡")
        st.write("책 두 권 📚 / 영화 두 편 🎥 — 간단한 이유도 같이 줄게요!")
        # 책
        st.markdown("**📚 책 추천**")
        for i, (title, blurb) in enumerate(rec["books"], start=1):
            st.markdown(f"- **{i}. {title}** — {blurb}")
        # 영화
        st.markdown("**🎬 영화 추천**")
        for i, (title, blurb) in enumerate(rec["movies"], start=1):
            st.markdown(f"- **{i}. {title}** — {blurb}")
        # 재미 요소: 랜덤 한 줄 코멘트
        fun_comments = [
            "오늘 밤에 하나 골라서 보기 딱 좋은데? 😏",
            "책 먼저? 영화 먼저? 너의 무브대로 골라봐~ 🎯",
            "궁금하면 바로 시도해봐, 취향 저격일지도! 💥",
            "친구에게도 추천해주면 쿨해 보일걸? 😉"
        ]
        st.info(random.choice(fun_comments))

# 사이드바: 간단 설명 및 사용법
with st.sidebar:
    st.header("사용법 📘")
    st.write("1) MBTI를 골라요\n2) '추천 받기!' 버튼 누르면 끝! \n\n추가로 바꾸고 싶으면 MBTI 다시 골라서 버튼 눌러봐~")
    st.markdown("---")
    st.write("⚠️ 이 추천은 '취향 맞춤형 제안'이에요. 완전 공식은 아니니까 편하게 참고만 해~")

# 푸터
st.markdown("---")
st.caption("만든이: MBTI 취향 추천봇 🤖 — 즐거운 독서와 영화 타임 되길! 🎉")
